<pre><font face="Lucida,Courier New"><font color="#008000">#!/usr/bin/env jython
</font>
<font color="#C00000">from</font> <font color="#000000">__future__</font> <font color="#C00000">import</font> <font color="#000000">nested_scopes</font>

<font color="#000000">__version__</font> <font color="#0000C0">=</font> <font color="#004080">"$Revision$"</font>

<font color="#C00000">import</font> <font color="#000000">sys</font>

<font color="#C00000">import</font> <font color="#000000">ensembl</font>

<font color="#000000">FILENAME</font> <font color="#0000C0">=</font> <font color="#004080">"ensembl-sources.tab"</font>

<font color="#000000">SQL_DUMP_SOURCES</font> <font color="#0000C0">=</font> <font color="#004080">"""SELECT name,
assembly,
genebuild
FROM genome_db"""</font>

<font color="#008000">## locator column only used during genebuild
</font><font color="#008000">## removed for release
</font><font color="#008000">##
</font><font color="#008000">## MID(locator,
</font><font color="#008000">##     LOCATE("dbname=", locator)+LENGTH("dbname="),
</font><font color="#008000">##     LENGTH(locator)-LOCATE(";", REVERSE(locator))+1-LOCATE("dbname=", locator)-LENGTH("dbname=")) as dbname
</font><font color="#008000">## 
</font>
<font color="#C00000">def</font> <font color="#000000">dump_sources</font><font color="#0000C0">(</font><font color="#000000">filename</font><font color="#0000C0">=</font><font color="#000000">FILENAME</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">ensembl</font><font color="#0000C0">.</font><font color="#000000">compara</font><font color="#0000C0">.</font><font color="#000000">sql</font><font color="#0000C0">(</font><font color="#000000">SQL_DUMP_SOURCES</font><font color="#0000C0">,</font> <font color="#000000">outfile</font><font color="#0000C0">=</font><font color="#000000">open</font><font color="#0000C0">(</font><font color="#000000">filename</font><font color="#0000C0">,</font> <font color="#004080">"w"</font><font color="#0000C0">)</font><font color="#0000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">main</font><font color="#0000C0">(</font><font color="#000000">args</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">dump_sources</font><font color="#0000C0">(</font><font color="#0000C0">)</font>

<font color="#C00000">if</font> <font color="#000000">__name__</font> <font color="#0000C0">==</font> <font color="#004080">"__main__"</font><font color="#0000C0">:</font>
    <font color="#000000">sys</font><font color="#0000C0">.</font><font color="#000000">exit</font><font color="#0000C0">(</font><font color="#000000">main</font><font color="#0000C0">(</font><font color="#000000">sys</font><font color="#0000C0">.</font><font color="#000000">argv</font><font color="#0000C0">[</font><font color="#0080C0">1</font><font color="#0000C0">:</font><font color="#0000C0">]</font><font color="#0000C0">)</font><font color="#0000C0">)</font><font color="#000000"></font></font></pre>