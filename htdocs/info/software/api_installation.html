<html>
<head>
<meta name="author" content="helpdesk" />
<meta name="navigation" content="Ensembl APIs" />
<title>Perl API Installation</title>
</head>

<body>

<h2>Perl API Installation</h2>


<h3 class="boxed">Introduction</h3>

<p>
All data sets in the Ensembl system are stored in relational databases.
For each of the <a href="./index.html">Ensembl databases</a> the project provides a specific Perl API.
This document aims to explain the installation procedure for Ensembl Perl APIs.
As Ensembl takes also advantage of code provided by the
<a href="http://www.bioperl.org/" target="external">Bioperl</a> project,
installation of the Bioperl package is part of this description.
</p>

<p>
Ensembl uses the
<a href="http://directory.fsf.org/cvs.html" target="external">Concurrent Versions System</a> (CVS) for storing the source codes.
This system will help you keeping up to date with developments and bug fixes.
You will need CVS installed if you want to download Ensembl code through
anonymous cvs access and a firewall needs to allow outgoing connections to
TCP port 2401.
There is also a
<a href="http://cvs.sanger.ac.uk/" target="external">web-based CVS</a>
repository, which also allowed download of 'tar' archives in case access
through a firewall was not possible.
</p>


<h3 class="boxed">Installation Procedure</h3>

<ol>

<li>
<p>
Create an installation directory
</p>

<pre>
$ cd
$ mkdir src
$ cd src
</pre>
</li>

<li>
<p>
Log into the Bioperl CVS server (using a password of "cvs"):
</p>

<pre>
$ cvs -d :pserver:cvs@cvs.bioperl.org:/home/repository/bioperl login
Logging in to :pserver:cvs@cvs.bioperl.org:2401/home/repository/bioperl
CVS password: cvs
</pre>
</li>

<li>
<p>
Install <a href="http://www.bioperl.org/" target="external">Bioperl</a> (version 1.2.3)
</p>

<pre>
$ cvs -d :pserver:cvs@cvs.bioperl.org:/home/repository/bioperl checkout -r bioperl-release-1-2-3 bioperl-live
</pre>
</li>

<li>
<p>Log into the Ensembl CVS server at Sanger (using a password of "CVSUSER"):</p>
<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl login
Logging in to :pserver:cvsuser@cvs.sanger.ac.uk:2401/cvsroot/ensembl
CVS password: CVSUSER
</pre>
</li>

<li>
<p>
Install the <a href="./core/index.html">Ensembl Core</a> Perl API for version [[SPECIESDEFS::ENSEMBL_VERSION]]
</p>

<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]] ensembl
</pre>
</li>

<li>
<p>
Install the <a href="./variation/index.html">Ensembl Variation</a> Perl API for version [[SPECIESDEFS::ENSEMBL_VERSION]]
</p>

<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]] ensembl-variation
</pre>
</li>

<li>
<p>
Install the <a href="./compara/index.html">Ensembl Compara</a> Perl API for verion [[SPECIESDEFS::ENSEMBL_VERSION]]
</p>

<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]] ensembl-compara
</pre>

<p>
NB: You can install as many Ensembl APIs as you need in this way.
</p>
</li>

<li>
<p>
Set up your environment
</p>

<p>
You have to tell Perl where to find the modules you just installed.
You can use the "use lib" clause in your script but if you want to make these modules available for all your scripts, 
the best way is to add them into the PERL5LIB environment variable.
</p>

<ul>
<li>
<p>
Under bash:
</p>

<pre>
PERL5LIB=${PERL5LIB}:${HOME}/src/bioperl-live
PERL5LIB=${PERL5LIB}:${HOME}/src/ensembl/modules
PERL5LIB=${PERL5LIB}:${HOME}/src/ensembl-compara/modules
export PERL5LIB
</pre>
</li>

<li>
<p>
Under csh or tcsh:
</p>

<pre>
setenv PERL5LIB ${PERL5LIB}:${HOME}/src/bioperl-live
setenv PERL5LIB ${PERL5LIB}:${HOME}/src/ensembl/modules
setenv PERL5LIB ${PERL5LIB}:${HOME}/src/ensembl-compara/modules
</pre>
</li>
</ul>

<p>
NB: If you installed extra Ensembl APIs, don't forget to add their path to the PERL5LIB environment variable.
</p>
</li>

</ol>


<h3 class="boxed">Update Procedure</h3>

<p>
In case you wanted to update the Perl APIs to a more recent version - remember
API and database version must be identical - you can use a simple cvs command
to achieve this.
</p>

<ol>

<li>
<p>
Change the working directory to the one, in which you originally installed
the APIs.
</p>

<pre>
$ cd
$ cd src
</pre>
</li>

<li>
<p>
For each of the APIs change into the top-directory before issuing the cvs
update command. So for the Ensembl Core API, which has been automatically
installed into the 'ensembl' directory use the following commands:
</p>

<pre>
$ cd ensembl
$ cvs -q update -d -P -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]]
$ cd ..
</pre>

<p>
CVS will automatically add, modify or delete files so that your working
directory will resemble the ensembl-branch you selected.
</p>

<p>
In case you are asked for a password, repeat the login steps in the
installation procedure above. (The password is normally stored in encrypted
form in a file in your home directory and remembered between CVS operations.)
</p>
</li>

</ol>

</body>
</html>
