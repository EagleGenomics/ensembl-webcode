<html>
<head>
<meta name="author" content="helpdesk" />
<meta name="navigation" content="Ensembl APIs" />
<title>Perl API Installation</title>
</head>

<body>

<h2>Perl API Installation</h2>


<h3 class="boxed">Introduction</h3>

<p>
All data sets in the Ensembl system are stored in relational databases
(MySQL).
For each of the <a href="./index.html">Ensembl databases</a> the project
provides a specific Perl API.
This document aims to explain the installation procedure for Ensembl
Perl APIs.
As Ensembl takes also advantage of code provided by the <a
href="http://www.bioperl.org/" target="external">BioPerl</a> project,
installation of the BioPerl package is part of this description.
</p>

<p>
Ensembl uses the <a href="http://directory.fsf.org/cvs.html"
target="external">Concurrent Versions System</a> (CVS) for storing the
source code and keeping track of source code revisions.
This system will help you keeping up to date with developments and bug
fixes.
You will need CVS installed if you want to download Ensembl code through
anonymous CVS access.
If your computer system is protected by a firewall, this firewall needs
to allow outgoing connections to TCP port 2401.
There is also a <a href="http://cvs.sanger.ac.uk/"
target="external">web-based CVS</a> repository, which allows you to
download Unix tar archives in case CVS access through a firewall is not
possible.
</p>

<h3 class="boxed">Installation Procedure</h3>

<ol>

<li>
<p>
Create an installation directory
</p>

<pre>
$ cd
$ mkdir src
$ cd src
</pre>
</li>

<li>
<p>
Log into the BioPerl CVS server (using a password of <kbd>cvs</kbd>):
</p>

<pre>
$ cvs -d :pserver:cvs@code.open-bio.org:/home/repository/bioperl login
Logging in to :pserver:cvs@code.open-bio.org:2401/home/repository/bioperl
CVS password: cvs
</pre>
</li>

<li>
<p>
Install <a href="http://www.bioperl.org/" target="external">BioPerl</a>
(version 1.2.3)
</p>

<pre>
$ cvs -d :pserver:cvs@code.open-bio.org:/home/repository/bioperl checkout -r bioperl-release-1-2-3 bioperl-live
</pre>
</li>

<li>
<p>
Log into the Ensembl CVS server at Sanger (using a password of
<kbd>CVSUSER</kbd>):
</p>
<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl login
Logging in to :pserver:cvsuser@cvs.sanger.ac.uk:2401/cvsroot/ensembl
CVS password: CVSUSER
</pre>
</li>

<li>
<p>
Install the <a href="./core/index.html">Ensembl Core</a> Perl API for
version [[SPECIESDEFS::ENSEMBL_VERSION]]
</p>

<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]] ensembl
</pre>
</li>

<li>
<p>
If required, install the <a href="./variation/index.html">Ensembl
Variation</a> Perl API for version [[SPECIESDEFS::ENSEMBL_VERSION]]
</p>

<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]] ensembl-variation
</pre>
</li>

<li>
<p>
If required, install the <a href="./compara/index.html">Ensembl
Compara</a> Perl API for verion [[SPECIESDEFS::ENSEMBL_VERSION]]
</p>

<pre>
$ cvs -d :pserver:cvsuser@cvs.sanger.ac.uk:/cvsroot/ensembl checkout -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]] ensembl-compara
</pre>

<p>
NB: You can install as many Ensembl APIs as you need in this way.
</p>
</li>

<li>
<p>
Set up your environment
</p>

<p>
You have to tell Perl where to find the modules you just installed.
You can do this by using the <code>use lib</code> clause in your script
but if you want to make these modules available for all your scripts,
the best way is to add them into the <var>PERL5LIB</var> environment
variable.
</p>

<ul>
<li>
<p>
Under <tt>bash</tt>, <tt>ksh</tt>, or any <tt>sh</tt>-derived shell:
</p>

<pre>
PERL5LIB=${PERL5LIB}:${HOME}/src/bioperl-live
PERL5LIB=${PERL5LIB}:${HOME}/src/ensembl/modules
PERL5LIB=${PERL5LIB}:${HOME}/src/ensembl-compara/modules
export PERL5LIB
</pre>
</li>

<li>
<p>
Under <tt>csh</tt> or <tt>tcsh</tt>:
</p>

<pre>
setenv PERL5LIB ${PERL5LIB}:${HOME}/src/bioperl-live
setenv PERL5LIB ${PERL5LIB}:${HOME}/src/ensembl/modules
setenv PERL5LIB ${PERL5LIB}:${HOME}/src/ensembl-compara/modules
</pre>
</li>
</ul>

<p>
NB: If you installed extra Ensembl APIs, don't forget to add their path
to the <var>PERL5LIB</var> environment variable.
</p>
</li>

</ol>

<h3 class="boxed">Update Procedure</h3>

<p>
In case you want to update the Perl APIs to a more recent version
&mdash; keep in mind that the API and database versions must be
identical &mdash; you can use a simple CVS command to achieve this.
</p>

<ol>
<li>
<p>
Change the working directory to the directory into which you originally
installed the APIs.
</p>

<pre>
$ cd
$ cd src
</pre>
</li>

<li>
<p>
For each of the APIs, change into its top-directory before issuing the
CVS <tt>update</tt> command.
So for the Ensembl Core API, which has been automatically installed into
the <tt>ensembl</tt> directory use the following commands:
</p>

<pre>
$ cd ensembl
$ cvs -q update -d -P -r branch-ensembl-[[SPECIESDEFS::ENSEMBL_VERSION]]
$ cd ..
</pre>

<p>
CVS will automatically add, modify or delete files so that your working
directory will resemble the ensembl-branch you selected.
</p>

<p>
In case you are asked for a password, repeat the login steps in the
installation procedure above.
(The password is normally stored in encrypted form in a file in your
home directory and remembered between CVS operations.)
</p>
</li>

</ol>

</body>
</html>
