(function($){$.fn.paginate=function(options){var currentPage="currentPage";var itemsPerPage="itemsPerPage";var meta;var defaults={itemContainer:".content",itemsPerPage:10,navPanel:".page_navigation",navInfo:".info_text",linksToDisplay:20,startPage:0,wrap:false,navLabelFirst:"First",navLabelPrev:"Prev",navLabelNext:"Next",navLabelLast:"Last",navOrder:["first","prev","num","next","last"],navLabelInfo:"Showing {0}-{1} of {2} results",showFirstLast:true,abortOnSmallLists:false,jqueryUI:false,jqueryUIActive:"ui-state-highlight",jqueryUIDefault:"ui-state-default",jqueryUIDisabled:"ui-state-disabled"};var options=$.extend(defaults,options);var $itemContainer;var $container;var $items;var $navPanels;var totalLinks;var jqueryUIDefaultClass=options.jqueryUI?options.jqueryUIDefault:"";var jqueryUIActiveClass=options.jqueryUI?options.jqueryUIActive:"";var jqueryUIDisabledClass=options.jqueryUI?options.jqueryUIDisabled:"";return this.each(function(){$container=$(this);$itemContainer=$(this).find(options.itemContainer);$items=$container.find(options.itemContainer).children();if(options.abortOnSmallLists&&options.itemsPerPage>=$items.size()){return $container;}meta=$container.data('paginate');if(!meta){$container.data('paginate',{});meta=$container.data('paginate');}meta[currentPage]=0;meta[itemsPerPage]=options.itemsPerPage;var totalItems=$itemContainer.children().size();var numberOfPages=Math.ceil(totalItems/options.itemsPerPage);var more='<span class="ellipse more">...</span>';var less='<span class="ellipse less">...</span>';var first=!options.showFirstLast?"":'<a class="first_link '+jqueryUIDefaultClass+'" href="">'+options.navLabelFirst+"</a>";var last=!options.showFirstLast?"":'<a class="last_link '+jqueryUIDefaultClass+'" href="">'+options.navLabelLast+"</a>";var navigationHTML="";for(var i=0;i<options.navOrder.length;i++){switch(options.navOrder[i]){case"first":navigationHTML+=first;break;case"last":navigationHTML+=last;break;case"next":navigationHTML+='<a class="next_link '+jqueryUIDefaultClass+'" href="">'+options.navLabelNext+"</a>";break;case"prev":navigationHTML+='<a class="previous_link '+jqueryUIDefaultClass+'" href="">'+options.navLabelPrev+"</a>";break;case"num":navigationHTML+=less;var currentLink=0;while(numberOfPages>currentLink){navigationHTML+='<a class="page_link '+jqueryUIDefaultClass+'" href="" longdesc="'+currentLink+'">'+(currentLink+1)+"</a>";currentLink++;}navigationHTML+=more;break;default:break;}}$navPanels=$container.find(options.navPanel);$navPanels.html(navigationHTML).each(function(){$(this).find(".page_link:first").addClass("first");$(this).find(".page_link:last").addClass("last");});$navPanels.children(".ellipse").hide();$navPanels.find(".previous_link").next().next().addClass("active_page "+jqueryUIActiveClass);$items.hide();$items.slice(0,meta[itemsPerPage]).show();totalLinks=$container.children(options.navPanel+":first").children(".page_link").size();options.linksToDisplay=Math.min(options.linksToDisplay,totalLinks);$navPanels.children(".page_link").hide();$navPanels.each(function(){$(this).children(".page_link").slice(0,options.linksToDisplay).show();});$container.find(".first_link").click(function(e){e.preventDefault();movePageNumbersRight($(this),0);gotopage(0);});$container.find(".last_link").click(function(e){e.preventDefault();var lastPage=totalLinks-1;movePageNumbersLeft($(this),lastPage);gotopage(lastPage);});$container.find(".previous_link").click(function(e){e.preventDefault();showPrevPage($(this));});$container.find(".next_link").click(function(e){e.preventDefault();showNextPage($(this));});$container.find(".page_link").click(function(e){e.preventDefault();gotopage($(this).attr("longdesc"));});gotopage(options.startPage);toggleMoreLess();if(!options.wrap){tagNextPrev();}});function showPrevPage(e){newPage=meta[currentPage]-1;if($(e).siblings(".active_page").prev(".page_link").length){movePageNumbersRight(e,newPage);gotopage(newPage);}else{if(options.wrap){gotopage(totalLinks-1);}}}function showNextPage(e){newPage=meta[currentPage]+1;if($(e).siblings(".active_page").next(".page_link").length){movePageNumbersLeft(e,newPage);gotopage(newPage);}else{if(options.wrap){gotopage(0);}}}function gotopage(pageNum){var ipp=meta[itemsPerPage];var isLastPage=false;startFrom=pageNum*ipp;endOn=startFrom+ipp;var items=$items.hide().slice(startFrom,endOn);items.show();$container.find(options.navPanel).children(".page_link[longdesc="+pageNum+"]").addClass("active_page "+jqueryUIActiveClass).siblings(".active_page").removeClass("active_page "+jqueryUIActiveClass);meta[currentPage]=pageNum;$container.find(options.navInfo).html(options.navLabelInfo.replace("{0}",startFrom+1).replace("{1}",startFrom+items.length).replace("{2}",$items.length));toggleMoreLess();tagNextPrev();}function movePageNumbersLeft(e,newP){var newPage=newP;var $activeLink=$(e).siblings(".active_page");if($activeLink.siblings(".page_link[longdesc="+newPage+"]").css("display")==="none"){$navPanels.each(function(){$(this).children(".page_link").hide().slice(newPage-options.linksToDisplay+1,newPage+1).show();});}}function movePageNumbersRight(e,newP){var newPage=newP;var $activeLink=$(e).siblings(".active_page");if($activeLink.siblings(".page_link[longdesc="+newPage+"]").css("display")==="none"){$navPanels.each(function(){$(this).children(".page_link").hide().slice(newPage,newPage+options.linksToDisplay).show();});}}function toggleMoreLess(){if(!$navPanels.children(".page_link:visible").hasClass("last")){$navPanels.children(".more").show();}else{$navPanels.children(".more").hide();}if(!$navPanels.children(".page_link:visible").hasClass("first")){$navPanels.children(".less").show();}else{$navPanels.children(".less").hide();}}function tagNextPrev(){if($navPanels.children(".last").hasClass("active_page")){$navPanels.children(".next_link,.last_link").addClass("no_more "+jqueryUIDisabledClass);}else{$navPanels.children(".next_link,.last_link").removeClass("no_more "+jqueryUIDisabledClass);}if($navPanels.children(".first").hasClass("active_page")){$navPanels.children(".previous_link,.first_link").addClass("no_more "+jqueryUIDisabledClass);}else{$navPanels.children(".previous_link,.first_link").removeClass("no_more "+jqueryUIDisabledClass);}}};})(jQuery);